# 1. 文件和目录的权限

## setuid

可执行文件和公共目录可以使用三种特殊类型的权限：setuid、setgid 和 sticky 位。
设置这些权限之后，运行可执行文件的任何用户都会采用该可执行文件所有者（或组）的 ID。

如

-rwsr-xr-x 1 root root 54192 Feb 24  2017 /usr/bin/passwd

对于SetUID的使用，可以做一个的比喻：一个绝密机关，要让一些人进来做一些事情，但是不能让他们看见机关内部的情况，
于是授权一些特殊的“车辆”（没有窗户，车门紧闭，看不到外面，只有一个小洞允许乘坐的人伸出手臂做事），带着所乘坐
的人开到要去的地方，允许它办完事情马上带他出来。

比如若给 vim seduid 权限，则普通用户能编辑 /etc/passwd


## setgid

将 setgid 权限应用于目录时，该目录中已创建的文件将属于该目录所属于的组。这些文件不属于创建进程所属于的组。在
目录中拥有写和执行权限的任何用户都可以在其中创建文件。但是，文件将属于拥有该目录的组，而不是用户所属于的组。

如

drwxrwsr-x  2 root mail  4096 Nov  3 06:25 mail


## sticky

sticky 位是保护目录中文件的权限位。如果对目录设置了 sticky 位，则只有文件所有者、目录所有者或特权用户才可以
删除文件。root 用户是特权用户的一个示例。sticky 位禁止用户从公共目录（如 /tmp）中删除其他用户的文件：




# 2. chroot

chroot，即 change root directory (更改 root 目录)。在 linux 系统中，系统默认的目录结构都是以 `/`，即是以根
(root) 开始的。而在使用 chroot 之后，系统的目录结构将以指定的位置作为 `/` 位置。

* 增加了系统的安全性，限制了用户的权力；
  在经过 chroot 之后，在新根下将访问不到旧系统的根目录结构和文件，这样就增强了系统的安全性。这个一般是在登录
  (login) 前使用 chroot，以此达到用户不能访问一些特定的文件。


* 建立一个与原系统隔离的系统目录结构，方便用户的开发；
  使用 chroot 后，系统读取的是新根下的目录和文件，这是一个与原系统根下文件不相关的目录结构。在这个新的环境中，
  可以用来测试软件的静态编译以及一些与系统不相关的独立开发。


* 切换系统的根目录位置，引导 Linux 系统启动以及急救系统等。

  chroot 的作用就是切换系统的根位置，而这个作用最为明显的是在系统初始引导磁盘的处理过程中使用，从初始 RAM 磁
  盘 (initrd) 切换系统的根位置并执行真正的 init。另外，当系统出现一些问题时，我们也可以使用 chroot 来切换到
  一个临时的系统。
