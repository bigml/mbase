## 数据编码与加密

编码与加密，本质上，是将原始数据，通过特定方法，转换成目标数据。

该方法可逆称为编码，不可逆，称为加密。

* 密钥 加密过程中指定的特定数据输入

* 公钥 可公开传递的密钥

* 私钥 仅私人所有的密钥




###  base64

Base64是一种基于64个可打印字符来表示二进制数据的表示方法。

64 个可打印字符需 6 位表示，而 4 x 6 = 24 为三个字节。 故，此方法编码30个字节的二进制数据，需要40个字节的空间进行输出保存。

Base64常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据。包括MIME的email、在XML中存储复杂数据。




### hash散列

将原始数据，没有密钥参与，经过特定计算，生成目标数据。

#### 目标为整数

  * RFC 1071 checksum
  * FNV-1a

#### 目标为固定长度

  * md5  16 字节(128位)
  * sha1 20 字节(160位)




### 对称（共享）密钥加密

将原始数据，有密钥参与，经过特定计算，生成目标数据，经过相同的密钥，目标数据可以 *解* 成原始数据。

  * mixed card table 最好不要做间谍
  * RFC 6455 websockt mask
  * AES, DES, Blowfish, IDEA, RC5, SEED



### 非对称加密

将原始数据，有私钥参与，经过特定计算，生成目标数据，经过对应公钥，目标数据可以 *解* 成原始数据。
非对称加密速度远远慢于对称加密。

   * 1976年 [DH](https://zh.wikipedia.org/wiki/%E8%BF%AA%E8%8F%B2-%E8%B5%AB%E7%88%BE%E6%9B%BC%E5%AF%86%E9%91%B0%E4%BA%A4%E6%8F%9B)
   * 1977年 RSA
   * DSA ECDSA (椭圆曲线签名算法，比特币协议使用)

非对称加密的应用场景：

1. 数字签名

原始数据散列后的值，用私钥加密生成签名，附在正文之后。
接收方用发送方的公钥解密签名后得到散列值，与原文的散列值对比，可判定原文是否被篡改。
常用于邮件通信。


2. 数字证书

接收方将接收到的 *公共数据* ，与 *第三方* 颁发的公共数据对比，以验证发送方是否 *可信赖*

  - 公共数据
    因应用场景不同而不同, 可简单理解为 *ID* （域名） + *DH 算法中的 p,g 或 RSA算法中的公钥*。

  - 第三方
    专门做数字认证的第三方公司(通常会公开自己的公钥)。

  - 可信赖
    从第三方拿到的该ID的公钥 与接收到的公钥一致。



李四：
“hi哥们，我想给你发个密文，把你的公钥给我发过来用用。”

张三：
“没问题的，这是我的公钥： d#8yHE8eU#hb*!neb，用这个公钥加密你的信息后给我发过来吧”

李四：
“这是我想对你说的话： *&#@uehuu(**#eehu&$##bfeu&&”

懂了吧？所以网警们哭了，本以为想监视他们的对话，可惜一无所获！
这种加密算法应用非常广泛，SSH, HTTPS, TLS，电子证书，电子签名，电子身份证等等。
正因为，这种加密是单向的，所以被称为非对称加密算法。


这两个密钥是数学相关，用某用户密钥加密后所得的信息，只能用该用户的解密密钥才能解密。
如果知道了其中一个，并不能计算出另外一个。因此如果公开了一对密钥中的一个，并不会危害到另外一个的秘密性质。
称公开的密钥为公钥；不公开的密钥为私钥。


HTTP
TLS/SSL
TCP
Ip
..


HTTP经过TLS/SSL非对称加密后传出去，而在接收方，接收到信息是需要一层层向上进行，经过每层的
“解包/解密”，最终通过HTTP转换成超文本信息。


比如说我们通过HTTPS连接某银行网站，这样我们就可以将我们的密码通过银行给我们的公钥进行加密
后发送给银行，而避免了在传输过程中被他人偷看的可能，因为即使他们讲我们的密文盗走，也无法解
密，只有银行网站可以解密，为什么？因为只有银行拥有与我们使用“公钥”加密相对的那个“私钥”。

所以HTTPS 就是 “HTTP内容向下传输的时候加了一层TLS/SSL加密”，仅此而已。


但是，千万【不要】以为，HTTPS 协议有了加密，就可高枕无忧了。俺再举一个例子来说明，光有加密
是不够滴。假设有一个坏人，搞了一个假的网银的站点，然后诱骗你上这个站点。假设你又比较单纯，
一不留神，就把你的帐号，口令都输入进去了。那这个坏蛋的阴谋就得逞鸟。

我们怎么知道我们使用的公钥就是银行给我们的呢？即使我们所访问的域名和银行的域名一致，因为黑
客完全可以通过修改我们本地的hosts文件，或者入侵dns，将域名映射到黑客的服务器。

为了防止坏人这么干，HTTPS 协议除了有加密的机制，还有一套证书的机制。通过证书来确保，某个站点确实就是某个站点。

有了证书之后，当你的浏览器在访问某个 HTTPS 网站时，会验证该站点上的 CA 证书（类似于验证介
绍信的公章）。如果浏览器发现该证书没有问题（证书被某个根证书信任、证书上绑定的域名和该网站
的域名一致、证书没有过期），那么页面就直接打开；否则的话，浏览器会给出一个警告，告诉你该网
站的证书存在某某问题，是否继续访问该站点？

所以，这就是CA(certificate authority)，数字证书，数字签名，公钥基础设施(PKI)等等名词的来历。


什么是安全证书
当您访问使用 HTTPS（安全连接）的网站时，该网站的服务器会使用证书向浏览器（如 Chrome）证明该网站的身份。任何人都可以创建证书，随意声称对应的网站是任意网站。

为了确保您安全上网，Chrome 会要求网站使用来自受信任组织发放的证书。

Verisign
https://segmentfault.com/a/1190000004461428
http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html
